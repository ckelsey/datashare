!function(e){"use strict";e.service("dataShareService",["$window","$localStorage",function(e,t){function n(){try{return window.self!==window.top}catch(e){return!0}}t.data||(t.data={});var r={data:t.data,callbacks:{},on:function(e,t){r.callbacks[e]||(r.callbacks[e]=[]),r.callbacks[e].push(t)},trigger:function(e,t){r.callbacks.hasOwnProperty(e)&&r.callbacks[e]&&r.callbacks[e].length&&angular.forEach(r.callbacks[e],function(e){e(t)})},resetCallbacks:function(e){e?delete r.callbacks[e]:r.callbacks={}},windowListeners:{},getWindow:function(t){var r,s=n();if("parent"===t&&s||!t&&s)r=e.parent;else if("self"===t)r=e;else if(t){var a=document.querySelector(t);a&&(r=a.contentWindow||a)}return r},getSelector:function(e){var t=n();return!e&&t&&(e="parent"),e},listen:function(e,t){t=r.getSelector(t);var n=r.getWindow(t);n&&t&&e&&(n.addEventListener("message",e),r.windowListeners.hasOwnProperty(t)&&r.windowListeners[t]||(r.windowListeners[t]=[]),r.windowListeners[t].push(e))},post:function(e,t,n){var s=r.getWindow(r.getSelector(t));s&&s.postMessage(e,n||"*")},unListen:function(e,t){t=r.getSelector(t);var n=r.getWindow(t);e||t?e?t&&n&&e&&r.removeListener(t,n,e):r.resetListenersBySelector(t):r.resetAllListeners()},removeListener:function(e,t,n){var s=[],a=0;for(a=0;a<r.windowListeners[e].length;a+=1){var i=r.windowListeners[e][a];n.toString()===i.toString()&&t.removeEventListener("message",n)}for(a=s.length;a--;)r.windowListeners[e].splice(a,1)},resetListenersBySelector:function(t){angular.forEach(r.windowListeners[t],function(t){"sameWindow"===p?e.removeEventListener("message",t):e.parent.removeEventListener("message",t)})},resetAllListeners:function(){for(var e in r.windowListeners)r.resetListenersBySelector(e)},reset:function(){r.callbacks={},r.resetAllListeners()},getData:function(e,t){t=r.getSelector(t);var n=(r.getWindow(t),r.data);if(e&&""!==e){e=e.split(".");for(var s=0;s<e.length;s+=1)n=n[e[s]]}return n},postData:function(e,t,n,s){n=r.getSelector(n);var a=(r.getWindow(n),r.data);if(e&&""!==e){e=e.split(".");for(var i=0;i<e.length;i+=1)a.hasOwnProperty(e[i])||(a[e[i]]={}),a=a[e[i]]}a=t,s&&r.post(s,n)}};return r}])}(angular.module("dataShare",["ngStorage"]));
//# sourceMappingURL=datashare.min.js.map
